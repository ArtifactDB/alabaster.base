<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Creating new alabaster applications • alabaster.base</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Creating new alabaster applications">
<meta property="og:description" content="alabaster.base">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">alabaster.base</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/applications.html">Creating new alabaster applications</a>
    </li>
    <li>
      <a href="../articles/extensions.html">Extending alabaster to new data structures</a>
    </li>
    <li>
      <a href="../articles/userguide.html">Saving objects to artifacts and back again</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Creating new alabaster applications</h1>
                        <h4 data-toc-skip class="author">Aaron Lun</h4>
                  <a class="author_email" href="mailto:#"></a><a href="mailto:infinite.monkeys.with.keyboards@gmail.com" class="email">infinite.monkeys.with.keyboards@gmail.com</a>
      
                  
            <h4 data-toc-skip class="date">Revised: September 29,
2022</h4>
      
      
      <div class="hidden name"><code>applications.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>Developers can also create “alabaster applications”, which customize
the machinery of the <strong>alabaster</strong> framework for specific
needs. Customizations typically involve:</p>
<ul>
<li>Changing how files/metadata are retrieved when loading objects into
an R session.</li>
<li>Added new schemas to support application-specific classes.</li>
<li>Adding more metadata requirements to some or existing classes.</li>
</ul>
<p>We provide a number of hooks inside <em><a href="https://github.com/ArtifactDB/alabaster.base" class="external-link">alabaster.base</a></em>
to enable applications to apply these customizations over the
defaults.</p>
</div>
<div class="section level2">
<h2 id="creating-a-new-retrieval-mechanism">Creating a new retrieval mechanism<a class="anchor" aria-label="anchor" href="#creating-a-new-retrieval-mechanism"></a>
</h2>
<p>The <code><a href="../reference/acquireFile.html">acquireMetadata()</a></code> and <code><a href="../reference/acquireFile.html">acquireFile()</a></code>
generic, which describe how the metadata and file artifacts should be
acquired. For example, applications can write new methods that query
APIs for this content rather than reading it from the filesystem.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">alabaster.base</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setClass.html" class="external-link">setClass</a></span><span class="op">(</span><span class="st">"RemoteDownloadHandler"</span>, slots<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>host<span class="op">=</span><span class="st">"character"</span>, id<span class="op">=</span><span class="st">"character"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setMethod.html" class="external-link">setMethod</a></span><span class="op">(</span><span class="st">"acquireFile"</span>, <span class="st">"RemoteDownloadHandler"</span>, <span class="kw">function</span><span class="op">(</span><span class="va">project</span>, <span class="va">path</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># Download a file here, possibly with some application-specific caching.</span></span>
<span>    <span class="va">demo.url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">project</span><span class="op">@</span><span class="va">host</span>, <span class="st">"/projects/"</span>, <span class="va">project</span><span class="op">@</span><span class="va">id</span>, <span class="st">"/file"</span>, <span class="va">path</span><span class="op">)</span></span>
<span>    <span class="va">target</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file</a></span><span class="op">(</span><span class="va">demo.url</span>, <span class="va">target</span><span class="op">)</span></span>
<span>    <span class="va">target</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setMethod.html" class="external-link">setMethod</a></span><span class="op">(</span><span class="st">"acquireMetadata"</span>, <span class="st">"RemoteDownloadHandler"</span>, <span class="kw">function</span><span class="op">(</span><span class="va">project</span>, <span class="va">path</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># Pull down JSON metadata, possibly with some application-specific caching.</span></span>
<span>    <span class="va">demo.url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">project</span><span class="op">@</span><span class="va">host</span>, <span class="st">"/projects/"</span>, <span class="va">project</span><span class="op">@</span><span class="va">id</span>, <span class="st">"/file"</span>, <span class="va">path</span><span class="op">)</span></span>
<span>    <span class="va">target</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file</a></span><span class="op">(</span><span class="va">demo.url</span>, <span class="va">target</span><span class="op">)</span></span>
<span>    <span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jsonlite/man/fromJSON.html" class="external-link">fromJSON</a></span><span class="op">(</span><span class="va">target</span>, simplifyVector<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>We can then construct an instance of a
<code>RemoteDownloadHandler</code>;</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">proj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/methods/new.html" class="external-link">new</a></span><span class="op">(</span><span class="st">"RemoteDownloadHandler"</span>, host<span class="op">=</span><span class="st">"https://my.institute.org/downloads"</span>, id<span class="op">=</span><span class="st">"PROJECT_ID"</span><span class="op">)</span></span></code></pre></div>
<p>And use it in <code><a href="../reference/loadObject.html">loadObject()</a></code>, which will use the new
methods for all internal <code><a href="../reference/acquireFile.html">acquireMetadata()</a></code> and
<code><a href="../reference/acquireFile.html">acquireFile()</a></code> calls. This will instruct
<code><a href="../reference/loadObject.html">loadObject()</a></code> to download remote content on demand.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Demonstration only.</span></span>
<span><span class="va">meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/acquireFile.html">acquireMetadata</a></span><span class="op">(</span><span class="va">proj</span>, <span class="st">"some/file/path.csv"</span><span class="op">)</span></span>
<span><span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/loadObject.html">loadObject</a></span><span class="op">(</span><span class="va">meta</span>, <span class="va">proj</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creating-new-schemas">Creating new schemas<a class="anchor" aria-label="anchor" href="#creating-new-schemas"></a>
</h2>
<p>Applications can define their own schemas with custom metadata
requirements or data structures. See <a href="https://github.com/ArtifactDB/BiocObjectSchemas" class="external-link">here</a> for more
details. Once created, the application-specific schemas should be stored
in the <code>inst/schemas</code> directory of the application’s R
package.</p>
</div>
<div class="section level2">
<h2 id="overriding-the-staging-method">Overriding the staging method<a class="anchor" aria-label="anchor" href="#overriding-the-staging-method"></a>
</h2>
<p>The <code><a href="../reference/altStageObject.html">.altStageObject()</a></code> setter allows applications to
replace <code><a href="../reference/stageObject.html">stageObject()</a></code> with an alternative staging generic.
This can be used to perform additional tasks during staging of some or
all classes, e.g., add more metadata. For example, we could force all
saving operations to include the author in the metadata for non-child
objects:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"appStageObject"</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">dir</span>, <span class="va">path</span>, <span class="va">child</span><span class="op">=</span><span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"appStageObject"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "appStageObject"</span></span></code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/methods/setMethod.html" class="external-link">setMethod</a></span><span class="op">(</span><span class="st">"appStageObject"</span>, <span class="st">"ANY"</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">dir</span>, <span class="va">path</span>, <span class="va">child</span><span class="op">=</span><span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stageObject.html">stageObject</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">dir</span>, <span class="va">path</span>, child<span class="op">=</span><span class="va">child</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Creating a fallback that adds authorship to all non-child objects. </span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="va">child</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">meta</span><span class="op">$</span><span class="va">authors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.info.html" class="external-link">Sys.info</a></span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="st">"user"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="co"># Pointing writeMetadata to the application package storing the schemas.</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">meta</span><span class="op">[[</span><span class="st">"$schema"</span><span class="op">]</span><span class="op">]</span>, <span class="st">"package"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"APPLICATION_NAME_HERE"</span></span>
<span></span>
<span>    <span class="va">meta</span> </span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>Application developers will typically create another wrapper function
that runs the setter before attempting to stage an object. This is more
convenient for the end-users of that application, who do not have to
remember what to set:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">appSave</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">dir</span>, <span class="va">path</span>, <span class="va">child</span><span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">olds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/altStageObject.html">altStageObjectFunction</a></span><span class="op">(</span><span class="va">appStageObject</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/on.exit.html" class="external-link">on.exit</a></span><span class="op">(</span><span class="fu"><a href="../reference/altStageObject.html">altStageObjectFunction</a></span><span class="op">(</span><span class="va">olds</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">meta</span> <span class="op">&lt;-</span> <span class="fu">appStageObject</span><span class="op">(</span><span class="va">x</span>, <span class="va">dir</span>, <span class="va">path</span>, child<span class="op">=</span><span class="va">child</span><span class="op">)</span></span>
<span>    <span class="va">written</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/writeMetadata.html">writeMetadata</a></span><span class="op">(</span><span class="va">meta</span>, <span class="va">dir</span><span class="op">)</span> </span>
<span></span>
<span>    <span class="va">written</span><span class="op">$</span><span class="va">path</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Of course, it is possible to customize the staging of specific
classes by simply defining a new method for the new generic:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/methods/setMethod.html" class="external-link">setMethod</a></span><span class="op">(</span><span class="st">"appStageObject"</span>, <span class="st">"DFrame"</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">dir</span>, <span class="va">path</span>, <span class="va">child</span><span class="op">=</span><span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># Extracting details from the metadata.</span></span>
<span>    <span class="va">clinical.trial.id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/S4Vectors/man/Annotated-class.html" class="external-link">metadata</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">$</span><span class="va">trial_id</span></span>
<span>    <span class="va">treatment</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/S4Vectors/man/Annotated-class.html" class="external-link">metadata</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">$</span><span class="va">treatment</span></span>
<span>    <span class="va">study.design</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/S4Vectors/man/Annotated-class.html" class="external-link">metadata</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">$</span><span class="va">study</span></span>
<span></span>
<span>    <span class="co"># Calling the ANY method, which eventually just calls stageObject...</span></span>
<span>    <span class="va">meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/methods/NextMethod.html" class="external-link">callNextMethod</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Adding some metadata for data frames, assuming these properties are</span></span>
<span>    <span class="co"># listed in the schema.</span></span>
<span>    <span class="va">meta</span><span class="op">[[</span><span class="st">"clinical_trail_details"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        trial_id <span class="op">=</span> <span class="va">trail.id</span>,</span>
<span>        treatment <span class="op">=</span> <span class="va">treatment</span>,</span>
<span>        design <span class="op">=</span> <span class="va">study.design</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>    <span class="va">meta</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="overriding-the-loading-method">Overriding the loading method<a class="anchor" aria-label="anchor" href="#overriding-the-loading-method"></a>
</h2>
<p>Similarly, the <code><a href="../reference/altLoadObject.html">.altLoadObject()</a></code> setter allows
applications to set an alternative loading function to replace
<code><a href="../reference/loadObject.html">loadObject()</a></code>. This is necessary if
<code><a href="../reference/altStageObject.html">.altStageObject()</a></code> is used to define a staging override that
points to a different set of schemas; in which case, the loading method
must also be overridden to look at those schemas to obtain appropriate
restoration method (in the <code>_attributes.restore.R</code> property).
The loading method may also attach various bits and pieces of global
metadata that we might have stored, e.g. authorship.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Memorize schema look-up in the R session, to avoid having to repeatedly query</span></span>
<span><span class="co"># the R package directory on the file system at every loadObject request.</span></span>
<span><span class="va">memory</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">new.env</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">memory</span><span class="op">$</span><span class="va">cache</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">appLoadObject</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">info</span>, <span class="va">project</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># customLoadObjectHelper is a helper function that handles loading with</span></span>
<span>    <span class="co"># different schema location and memory store.</span></span>
<span>    <span class="va">output</span> <span class="op">&lt;-</span> <span class="fu">customLoadObjectHelper</span><span class="op">(</span><span class="va">info</span>, <span class="va">project</span>, <span class="va">...</span>, </span>
<span>        .locations<span class="op">=</span><span class="st">"APPLCATION_NAME_HERE"</span>,</span>
<span>        .memory<span class="op">=</span><span class="va">memory</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="st">"authors"</span> <span class="op"><a href="https://rdrr.io/pkg/BiocGenerics/man/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">info</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="fu"><a href="https://rdrr.io/r/methods/is.html" class="external-link">is</a></span><span class="op">(</span><span class="va">output</span>, <span class="st">"Annotated"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/S4Vectors/man/Annotated-class.html" class="external-link">metadata</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span><span class="op">$</span><span class="va">authors</span> <span class="op">&lt;-</span> <span class="va">info</span><span class="op">$</span><span class="va">authors</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="va">output</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Application developers will typically create another wrapper function
that runs the setter before attempting to load an object. This wrapper
may also create the application-specific <code>*Handler</code> class
that will be used to override <code>acquireFile</code> and
<code>acquireMetadata</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">appLoad</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">project</span>, <span class="va">path</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">oldl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/altLoadObject.html">altLoadObjectFunction</a></span><span class="op">(</span><span class="va">appLoadObject</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/on.exit.html" class="external-link">on.exit</a></span><span class="op">(</span><span class="fu"><a href="../reference/altLoadObject.html">altLoadObjectFunction</a></span><span class="op">(</span><span class="va">oldl</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/acquireFile.html">acquireMetadata</a></span><span class="op">(</span><span class="va">project</span>, <span class="va">path</span><span class="op">)</span></span>
<span>    <span class="fu">appLoadObject</span><span class="op">(</span><span class="va">info</span>, <span class="va">project</span>, child<span class="op">=</span><span class="va">child</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Note that <code><a href="../reference/altLoadObject.html">altLoadObject()</a></code> will override the loading for
all objects. For overrides of specific objects, application developers
can simply modify the <code>_attributes.restore.R</code> in the
corresponding schema to point to a different function.</p>
</div>
<div class="section level2">
<h2 class="unnumbered" id="session-information">Session information<a class="anchor" aria-label="anchor" href="#session-information"></a>
</h2>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## R version 4.3.1 (2023-06-16)</span></span>
<span><span class="co">## Platform: x86_64-pc-linux-gnu (64-bit)</span></span>
<span><span class="co">## Running under: Ubuntu 22.04.3 LTS</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Matrix products: default</span></span>
<span><span class="co">## BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 </span></span>
<span><span class="co">## LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## locale:</span></span>
<span><span class="co">##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              </span></span>
<span><span class="co">##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    </span></span>
<span><span class="co">##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   </span></span>
<span><span class="co">##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 </span></span>
<span><span class="co">##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            </span></span>
<span><span class="co">## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## time zone: Etc/UTC</span></span>
<span><span class="co">## tzcode source: system (glibc)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## attached base packages:</span></span>
<span><span class="co">## [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## other attached packages:</span></span>
<span><span class="co">## [1] alabaster.base_1.1.9 BiocStyle_2.29.2    </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## loaded via a namespace (and not attached):</span></span>
<span><span class="co">##  [1] jsonlite_1.8.7          compiler_4.3.1          BiocManager_1.30.22    </span></span>
<span><span class="co">##  [4] Rcpp_1.0.11             stringr_1.5.0           rhdf5filters_1.13.5    </span></span>
<span><span class="co">##  [7] jquerylib_0.1.4         systemfonts_1.0.5       textshaping_0.3.7      </span></span>
<span><span class="co">## [10] yaml_2.3.7              fastmap_1.1.1           R6_2.5.1               </span></span>
<span><span class="co">## [13] knitr_1.44              BiocGenerics_0.47.0     bookdown_0.36          </span></span>
<span><span class="co">## [16] desc_1.4.2              rprojroot_2.0.3         bslib_0.5.1            </span></span>
<span><span class="co">## [19] rlang_1.1.1             cachem_1.0.8            stringi_1.7.12         </span></span>
<span><span class="co">## [22] xfun_0.40               fs_1.6.3                sass_0.4.7             </span></span>
<span><span class="co">## [25] memoise_2.0.1           cli_3.6.1               pkgdown_2.0.7          </span></span>
<span><span class="co">## [28] magrittr_2.0.3          Rhdf5lib_1.23.2         digest_0.6.33          </span></span>
<span><span class="co">## [31] alabaster.schemas_1.1.6 rhdf5_2.45.1            lifecycle_1.0.3        </span></span>
<span><span class="co">## [34] S4Vectors_0.39.3        vctrs_0.6.4             evaluate_0.22          </span></span>
<span><span class="co">## [37] glue_1.6.2              ragg_1.2.6              stats4_4.3.1           </span></span>
<span><span class="co">## [40] rmarkdown_2.25          purrr_1.0.2             tools_4.3.1            </span></span>
<span><span class="co">## [43] htmltools_0.5.6.1</span></span></code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Aaron Lun.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
