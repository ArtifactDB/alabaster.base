<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Extending alabaster to new data structures • alabaster.base</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Extending alabaster to new data structures">
<meta property="og:description" content="alabaster.base">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">alabaster.base</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.99.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/applications.html">Creating new alabaster applications</a>
    </li>
    <li>
      <a href="../articles/extensions.html">Extending alabaster to new data structures</a>
    </li>
    <li>
      <a href="../articles/userguide.html">Saving objects to artifacts and back again</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Extending alabaster to new data structures</h1>
                        <h4 data-toc-skip class="author">Aaron Lun</h4>
                  <a class="author_email" href="mailto:#"></a><a href="mailto:infinite.monkeys.with.keyboards@gmail.com" class="email">infinite.monkeys.with.keyboards@gmail.com</a>
      
                  
            <h4 data-toc-skip class="date">Revised: September 29,
2022</h4>
      
      
      <div class="hidden name"><code>extensions.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>Developers can easily extend this framework to support more
R/Bioconductor classes by creating their own <strong>alabaster</strong>
package. This involves defining a schema, creating a staging function
and creating a loading function. Readers are assumed to know the basics
of R package development.</p>
<p>To demonstrate, let’s use the <code>dgTMatrix</code> classes from the
<em><a href="https://CRAN.R-project.org/package=Matrix" class="external-link">Matrix</a></em>
package. In this vignette, we’ll be creating an <em>alabaster.foo</em>
package to save and load these objects to/from file.</p>
</div>
<div class="section level2">
<h2 id="defining-a-schema">Defining a schema<a class="anchor" aria-label="anchor" href="#defining-a-schema"></a>
</h2>
<p>This involves some initial steps:</p>
<ol style="list-style-type: decimal">
<li>Clone the <a href="https://github.com/ArtifactDB/BiocObjectSchemas" class="external-link"><code>ArtifactDB/BiocObjectSchemas</code></a>
repository.</li>
<li>Read <a href="https://github.com/ArtifactDB/BiocObjectSchemas/blob/master/docs/schema_conventions.md" class="external-link">this
document</a> for the schema conventions.</li>
<li>Create a new subdirectory inside <code>raw/</code> with the name of
your schema.</li>
<li>Create a schema file with the specified version, usually
<code>v1.json</code>.</li>
</ol>
<p>Our new schema will be called <code>sparse_triplet_matrix</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"$schema"</span><span class="fu">:</span> <span class="st">"http://json-schema.org/draft-07/schema"</span><span class="fu">,</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"$id"</span><span class="fu">:</span> <span class="st">"sparse_triplet_matrix/v1.json"</span><span class="fu">,</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"title"</span><span class="fu">:</span> <span class="st">"Sparse Triplet Matrix"</span><span class="fu">,</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"object"</span><span class="fu">,</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"Sparse matrix in triplet form, as a demonstration of how to use a schema for my dense matrix type. Data is stored in a CSV file with three columns - `i`, an integer field containing the 0-based row indices of each non-zero element; `j`, an integer field containing the column indices; and `x`, a double-precision field containing the value of the non-zero element."</span><span class="fu">,</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"allOf"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span> <span class="dt">"$ref"</span><span class="fu">:</span> <span class="st">"../array/v1.json"</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span> <span class="dt">"$ref"</span><span class="fu">:</span> <span class="st">"../_md5sum/v1.json"</span> <span class="fu">}</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"properties"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"sparse_triplet_matrix"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"object"</span><span class="fu">,</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"properties"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>                <span class="dt">"num_elements"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"integer"</span><span class="fu">,</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"Number of non-zero elements in the sparse matrix."</span><span class="fu">,</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">"minimum"</span><span class="fu">:</span> <span class="dv">0</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>                <span class="fu">}</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>            <span class="fu">},</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"required"</span><span class="fu">:</span> <span class="ot">[</span> <span class="st">"num_elements"</span> <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"allOf"</span><span class="fu">:</span> <span class="ot">[</span> <span class="fu">{</span> <span class="dt">"$ref"</span><span class="fu">:</span> <span class="st">"../_compression/v1.json"</span> <span class="fu">}</span> <span class="ot">]</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"required"</span><span class="fu">:</span> <span class="ot">[</span> <span class="st">"sparse_triplet_matrix"</span> <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"_attributes"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"format"</span><span class="fu">:</span> <span class="st">"text/csv"</span><span class="fu">,</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"restore"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"R"</span><span class="fu">:</span> <span class="st">"alabaster.foo::loadSparseTripletMatrix"</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>This involves a few choices:</p>
<ul>
<li>Given that we’re dealing with an array-like type, we’ll “inherit”
from the base <a href="https://github.com/ArtifactDB/BiocObjectSchemas/tree/master/raw/array/v1.json" class="external-link"><code>array/v1.json</code></a>
schema. This allows the <code>sparse_triplet_matrix</code> to be used
inside objects that expect arrays, e.g.,
<code>SummarizedExperiment</code>s. It also provides a standard place to
store the array dimensions and type.</li>
<li>We’ll report the number of non-zero elements inside the
<code>sparse_triplet_matrix</code> property, just in case anyone cares.
We’ll also report the compression method used for the CSV file.</li>
<li>As we’ll be saving the triplets in CSV format, we set the
<code>text/csv</code> type in the <code>_attributes.format</code>
property.</li>
<li>The <code>_attributes.restore.R</code> property specifies the
namespaced function to be used to restore the object in an R
session.</li>
</ul>
<p>Once we’re happy, we can run the <a href="https://github.com/ArtifactDB/BiocObjectSchemas/tree/scripts/resolver.py" class="external-link"><code>scripts/resolver.py</code></a>
script to resolve all the <code>$ref</code> references.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python3</span> scripts/resolver.py raw resolved</span></code></pre></div>
<p>This creates a <code>resolved/sparse_triplet_matrix/v1.json</code>
file that looks like:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"$id"</span><span class="fu">:</span> <span class="st">"sparse_triplet_matrix/v1.json"</span><span class="fu">,</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"$schema"</span><span class="fu">:</span> <span class="st">"http://json-schema.org/draft-07/schema"</span><span class="fu">,</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"_attributes"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"format"</span><span class="fu">:</span> <span class="st">"text/csv"</span><span class="fu">,</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"restore"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"R"</span><span class="fu">:</span> <span class="st">"alabaster.foo::loadSparseTripletMatrix"</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"Sparse matrix in triplet form, as a demonstration of how to use a schema for my dense matrix type. Data is stored in a CSV file with three columns - `i`, an integer field containing the 0-based row indices of each non-zero element; `j`, an integer field containing the column indices; and `x`, a double-precision field containing the value of the non-zero element.</span><span class="ch">\n\n</span><span class="st">Derived from `array/v1.json`: some kind of multi-dimensional array, where we store metadata about the dimensions and type of data. The exact implementation of the array is left to concrete subclasses."</span><span class="fu">,</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"properties"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"$schema"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"The schema to use."</span><span class="fu">,</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"string"</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">},</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"array"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"additionalProperties"</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"properties"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>                <span class="dt">"dimensions"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"Dimensions of an n-dimensional array. Dimensions should be ordered from the fastest-changing to the slowest."</span><span class="fu">,</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">"items"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>                        <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"integer"</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">},</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">"minItems"</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"array"</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>                <span class="fu">},</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>                <span class="dt">"type"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"Type of data stored in this array."</span><span class="fu">,</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">"enum"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"boolean"</span><span class="ot">,</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"number"</span><span class="ot">,</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"integer"</span><span class="ot">,</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"string"</span><span class="ot">,</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"other"</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>                    <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"string"</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>                <span class="fu">}</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>            <span class="fu">},</span></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"required"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>                <span class="st">"dimensions"</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>            <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"object"</span></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>        <span class="fu">},</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"is_child"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"default"</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"Is this a child document, only to be interpreted in the context of the parent document from which it is linked? This may have implications for search and metadata requirements."</span><span class="fu">,</span></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"boolean"</span></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>        <span class="fu">},</span></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"md5sum"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"MD5 checksum for the file."</span><span class="fu">,</span></span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"string"</span></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>        <span class="fu">},</span></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"path"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"Path to the file in the project directory."</span><span class="fu">,</span></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"string"</span></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>        <span class="fu">},</span></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"sparse_triplet_matrix"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"properties"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>                <span class="dt">"compression"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"Type of compression applied to the file."</span><span class="fu">,</span></span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">"enum"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"none"</span><span class="ot">,</span></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"gzip"</span><span class="ot">,</span></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"bzip2"</span></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>                    <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"string"</span></span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>                <span class="fu">},</span></span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>                <span class="dt">"num_elements"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"Number of non-zero elements in the sparse matrix."</span><span class="fu">,</span></span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">"minimum"</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"integer"</span></span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a>                <span class="fu">}</span></span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>            <span class="fu">},</span></span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"required"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a>                <span class="st">"num_elements"</span></span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>            <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"object"</span></span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"required"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>        <span class="st">"$schema"</span><span class="ot">,</span></span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a>        <span class="st">"array"</span><span class="ot">,</span></span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a>        <span class="st">"md5sum"</span><span class="ot">,</span></span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a>        <span class="st">"path"</span><span class="ot">,</span></span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a>        <span class="st">"sparse_triplet_matrix"</span></span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a>    <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"title"</span><span class="fu">:</span> <span class="st">"Sparse Triplet Matrix "</span><span class="fu">,</span></span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"object"</span></span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Let’s put this file in the
<code>inst/schemas/sparse_triplet_matrix</code> subdirectory of
<em>alabaster.foo</em>.</p>
</div>
<div class="section level2">
<h2 id="writing-a-staging-method">Writing a staging method<a class="anchor" aria-label="anchor" href="#writing-a-staging-method"></a>
</h2>
<p>We need to create a method for the <code><a href="../reference/stageObject.html">stageObject()</a></code> generic
that operates on the class of interest. This will be called whenever an
instance of that class is encountered by <code><a href="../reference/stageObject.html">stageObject()</a></code>,
either directly or as a child of another object (e.g., a
<code>SummarizedExperiment</code>’s assay).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://Matrix.R-forge.R-project.org/" class="external-link">Matrix</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">alabaster.base</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bioconductor.org/packages/S4Vectors" class="external-link">S4Vectors</a></span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setMethod.html" class="external-link">setMethod</a></span><span class="op">(</span><span class="st">"stageObject"</span>, <span class="st">"dgTMatrix"</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">dir</span>, <span class="va">path</span>, <span class="va">child</span><span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># Create a subdirectory to stash our contents.</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">dir</span>, <span class="va">path</span><span class="op">)</span>, showWarnings<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Create a DataFrame with the triplet data.</span></span>
<span>    <span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/S4Vectors/man/DataFrame-class.html" class="external-link">DataFrame</a></span><span class="op">(</span>i <span class="op">=</span> <span class="va">x</span><span class="op">@</span><span class="va">i</span>, j <span class="op">=</span> <span class="va">x</span><span class="op">@</span><span class="va">j</span>, x <span class="op">=</span> <span class="va">x</span><span class="op">@</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># .quickWriteCsv will make sure it's written in an 'alabaster-standard' format.</span></span>
<span>    <span class="va">outpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">path</span>, <span class="st">"foo.csv.gz"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="../reference/quickReadCsv.html">.quickWriteCsv</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">dir</span>, <span class="va">outpath</span><span class="op">)</span>, compression<span class="op">=</span><span class="st">"gzip"</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Specifying the package name in the package attribute of the schema,</span></span>
<span>    <span class="co"># to ensure that .writeMetadata() can find it for validation.</span></span>
<span>    <span class="va">schema</span> <span class="op">&lt;-</span> <span class="st">"sparse_triplet_matrix/v1.json"</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">schema</span>, <span class="st">"package"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"alabaster.foo"</span></span>
<span></span>
<span>    <span class="co"># Formatting the metadata for return.</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        `$schema`<span class="op">=</span><span class="va">schema</span>,</span>
<span></span>
<span>        <span class="co"># Reported path must be relative to 'dir'.</span></span>
<span>        path<span class="op">=</span><span class="va">outpath</span>,</span>
<span></span>
<span>        <span class="co"># Pass along the 'child' specification from the call.</span></span>
<span>        is_child<span class="op">=</span><span class="va">child</span>,</span>
<span></span>
<span>        `array`<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            <span class="co"># Need I() to prevent unboxing of length-1 vectors.</span></span>
<span>            dimensions<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>,</span>
<span></span>
<span>            <span class="co"># double-precision values =&gt; 'number' in JSON schema's language.</span></span>
<span>            type<span class="op">=</span><span class="st">"number"</span></span>
<span>        <span class="op">)</span>,</span>
<span></span>
<span>        sparse_triplet_matrix<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            num_elements<span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/BiocGenerics/man/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>,</span>
<span>            compression<span class="op">=</span><span class="st">"gzip"</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>Alright, let’s test this out with a mock <code>dgTMatrix</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Matrix/man/sparseMatrix.html" class="external-link">sparseMatrix</a></span><span class="op">(</span></span>
<span>    i<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">5</span>,<span class="fl">6</span><span class="op">)</span>, </span>
<span>    j<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">6</span>,<span class="fl">1</span>,<span class="fl">3</span>,<span class="fl">8</span><span class="op">)</span>, </span>
<span>    x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>, </span>
<span>    dims<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span>, </span>
<span>    repr<span class="op">=</span><span class="st">"T"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre></div>
<pre><code><span><span class="co">## 10 x 10 sparse Matrix of class "dgTMatrix"</span></span>
<span><span class="co">##                                                          </span></span>
<span><span class="co">##  [1,] .         . 0.2392620 . . .         . .         . .</span></span>
<span><span class="co">##  [2,] .         . .         . . 0.4325051 . .         . .</span></span>
<span><span class="co">##  [3,] 0.3271235 . .         . . .         . .         . .</span></span>
<span><span class="co">##  [4,] .         . .         . . .         . .         . .</span></span>
<span><span class="co">##  [5,] .         . 0.2463091 . . .         . .         . .</span></span>
<span><span class="co">##  [6,] .         . .         . . .         . 0.9492102 . .</span></span>
<span><span class="co">##  [7,] .         . .         . . .         . .         . .</span></span>
<span><span class="co">##  [8,] .         . .         . . .         . .         . .</span></span>
<span><span class="co">##  [9,] .         . .         . . .         . .         . .</span></span>
<span><span class="co">## [10,] .         . .         . . .         . .         . .</span></span></code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">tmp</span><span class="op">)</span></span>
<span><span class="va">meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stageObject.html">stageObject</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">tmp</span>, <span class="st">"test"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">meta</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## List of 5</span></span>
<span><span class="co">##  $ $schema              : chr "sparse_triplet_matrix/v1.json"</span></span>
<span><span class="co">##   ..- attr(*, "package")= chr "alabaster.foo"</span></span>
<span><span class="co">##  $ path                 : chr "test/foo.csv.gz"</span></span>
<span><span class="co">##  $ is_child             : logi FALSE</span></span>
<span><span class="co">##  $ array                :List of 2</span></span>
<span><span class="co">##   ..$ dimensions: 'AsIs' int [1:2] 10 10</span></span>
<span><span class="co">##   ..$ type      : chr "number"</span></span>
<span><span class="co">##  $ sparse_triplet_matrix:List of 2</span></span>
<span><span class="co">##   ..$ num_elements: int 5</span></span>
<span><span class="co">##   ..$ compression : chr "gzip"</span></span></code></pre>
<p>Running <code><a href="../reference/writeMetadata.html">.writeMetadata()</a></code> will then validate
<code>meta</code> against the schema requirements, using the schema file
that we put inside <em>alabaster.foo</em>.</p>
</div>
<div class="section level2">
<h2 id="writing-a-loading-method">Writing a loading method<a class="anchor" aria-label="anchor" href="#writing-a-loading-method"></a>
</h2>
<p>Finally, for loading, we need to define a new <code>load*</code>
function for the new class that recreates the R object from the staged
files. In this case, it’s fairly simple:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">loadSparseTripletMatrix</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">info</span>, <span class="va">project</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># Need to get the file path.</span></span>
<span>    <span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/acquireFile.html">acquireFile</a></span><span class="op">(</span><span class="va">project</span>, <span class="va">info</span><span class="op">$</span><span class="va">path</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># This utility will check that the CSV is correctly formatted,</span></span>
<span>    <span class="co"># which is more stringent than read.csv.</span></span>
<span>    <span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/quickReadCsv.html">.quickReadCsv</a></span><span class="op">(</span><span class="va">path</span>,</span>
<span>        expected.columns<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>i<span class="op">=</span><span class="st">"integer"</span>, j<span class="op">=</span><span class="st">"integer"</span>, x<span class="op">=</span><span class="st">"double"</span><span class="op">)</span>,</span>
<span>        expected.nrows<span class="op">=</span><span class="va">info</span><span class="op">$</span><span class="va">sparse_triplet_matrix</span><span class="op">$</span><span class="va">num_elements</span>,</span>
<span>        compression<span class="op">=</span><span class="va">info</span><span class="op">$</span><span class="va">sparse_triplet_matrix</span><span class="op">$</span><span class="va">compression</span>,</span>
<span>        row.names<span class="op">=</span><span class="cn">FALSE</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Constructor uses 1-based indices.</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/Matrix/man/sparseMatrix.html" class="external-link">sparseMatrix</a></span><span class="op">(</span></span>
<span>         i<span class="op">=</span><span class="va">df</span><span class="op">$</span><span class="va">i</span> <span class="op">+</span> <span class="fl">1L</span>, </span>
<span>         j<span class="op">=</span><span class="va">df</span><span class="op">$</span><span class="va">j</span> <span class="op">+</span> <span class="fl">1L</span>, </span>
<span>         x<span class="op">=</span><span class="va">df</span><span class="op">$</span><span class="va">x</span>, </span>
<span>         dims<span class="op">=</span><span class="va">info</span><span class="op">$</span><span class="va">array</span><span class="op">$</span><span class="va">dimensions</span>, </span>
<span>         repr<span class="op">=</span><span class="st">"T"</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Let’s try it out with our previously staged
<code>dgTMatrix</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">loadSparseTripletMatrix</span><span class="op">(</span><span class="va">meta</span>, <span class="va">tmp</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## 10 x 10 sparse Matrix of class "dgTMatrix"</span></span>
<span><span class="co">##                                                          </span></span>
<span><span class="co">##  [1,] .         . 0.2392620 . . .         . .         . .</span></span>
<span><span class="co">##  [2,] .         . .         . . 0.4325051 . .         . .</span></span>
<span><span class="co">##  [3,] 0.3271235 . .         . . .         . .         . .</span></span>
<span><span class="co">##  [4,] .         . .         . . .         . .         . .</span></span>
<span><span class="co">##  [5,] .         . 0.2463091 . . .         . .         . .</span></span>
<span><span class="co">##  [6,] .         . .         . . .         . 0.9492102 . .</span></span>
<span><span class="co">##  [7,] .         . .         . . .         . .         . .</span></span>
<span><span class="co">##  [8,] .         . .         . . .         . .         . .</span></span>
<span><span class="co">##  [9,] .         . .         . . .         . .         . .</span></span>
<span><span class="co">## [10,] .         . .         . . .         . .         . .</span></span></code></pre>
<p>To register this method with <em><a href="https://github.com/alabaster.base" class="external-link">alabaster.base</a></em>,
<em>alabaster.foo</em> should add itself to the known schema locations
upon load:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Typically in zzz.R.</span></span>
<span><span class="va">.onLoad</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">libname</span>, <span class="va">pkgname</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">existing</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="st">"alabaster.schema.locations"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>alabaster.schema.locations<span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/BiocGenerics/man/sets.html" class="external-link">union</a></span><span class="op">(</span><span class="st">"alabaster.foo"</span>, <span class="va">existing</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">.onUnload</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">libpath</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">existing</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="st">"alabaster.schema.locations"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>alabaster.schema.locations<span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/BiocGenerics/man/sets.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="va">existing</span>, <span class="st">"alabaster.foo"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>This ensures that <code><a href="../reference/loadObject.html">loadObject()</a></code> can find the resolved
schema file in <em>alabaster.foo</em>’s <code>inst/schemas</code> when
it encounters an instance of a
<code>sparse_triplet_matrix/v1.json</code>. From the schema,
<code><a href="../reference/loadObject.html">loadObject()</a></code> will look at the ’s
<code>_attributes.restore.R</code> property to figure out how to load it
into R, which will eventually lead to calling
<code>loadSparseTripletMatrix()</code>.</p>
</div>
<div class="section level2">
<h2 id="advanced-concepts">Advanced concepts<a class="anchor" aria-label="anchor" href="#advanced-concepts"></a>
</h2>
<p>Some staging methods may need to save child objects, represented by
the resource pointers in the schema. For example, a
<code>SummarizedExperiment</code> would contain multiple children - each
assay, the <code>DataFrame</code>s for the column and row annotations,
the metadata list, and so on. These are easily handled by just calling
the staging methods of each child object inside the staging method for
the parent object:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Abbreviated example from artificer.se:</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setMethod.html" class="external-link">setMethod</a></span><span class="op">(</span><span class="st">"stageObject"</span>, <span class="st">"SummarizedExperiment"</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">dir</span>, <span class="va">path</span>, <span class="va">child</span><span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">dir</span>, <span class="va">path</span><span class="op">)</span>, showWarnings<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Saving the colData.</span></span>
<span>    <span class="va">info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/altStageObject.html">.stageObject</a></span><span class="op">(</span><span class="fu">colData</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="va">dir</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">path</span>, <span class="st">"coldata"</span><span class="op">)</span>, child<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="va">cd.info</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>resource<span class="op">=</span><span class="fu"><a href="../reference/writeMetadata.html">.writeMetadata</a></span><span class="op">(</span><span class="va">info</span>, dir<span class="op">=</span><span class="va">dir</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Saving the rowData.</span></span>
<span>    <span class="va">info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/altStageObject.html">.stageObject</a></span><span class="op">(</span><span class="fu">rowData</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="va">dir</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">path</span>, <span class="st">"rowdata"</span><span class="op">)</span>, child<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="va">rd.info</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>resource<span class="op">=</span><span class="fu"><a href="../reference/writeMetadata.html">.writeMetadata</a></span><span class="op">(</span><span class="va">info</span>, dir<span class="op">=</span><span class="va">dir</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Saving the other metadata.</span></span>
<span>    <span class="va">info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/altStageObject.html">.stageObject</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/S4Vectors/man/Annotated-class.html" class="external-link">metadata</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="va">dir</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">path</span>, <span class="st">"metadata"</span><span class="op">)</span>, child<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="va">other.info</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>resource<span class="op">=</span><span class="fu"><a href="../reference/writeMetadata.html">.writeMetadata</a></span><span class="op">(</span><span class="va">info</span>, dir<span class="op">=</span><span class="va">dir</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Saving the assays.</span></span>
<span>    <span class="va">assay.info</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">a</span> <span class="kw">in</span> <span class="fu">assayNames</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">curmat</span> <span class="op">&lt;-</span> <span class="fu">assay</span><span class="op">(</span><span class="va">x</span>, <span class="va">a</span><span class="op">)</span></span>
<span>        <span class="va">mat.path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">path</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"assay-"</span>, <span class="va">i</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="va">meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/altStageObject.html">.stageObject</a></span><span class="op">(</span><span class="va">curmat</span>, path<span class="op">=</span><span class="va">mat.path</span>, dir<span class="op">=</span><span class="va">dir</span>, child<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span>        <span class="va">deets</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/writeMetadata.html">.writeMetadata</a></span><span class="op">(</span><span class="va">meta</span>, dir<span class="op">=</span><span class="va">dir</span><span class="op">)</span></span>
<span>        <span class="va">assay.info</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">assay.info</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name<span class="op">=</span><span class="va">ass.names</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, resource<span class="op">=</span><span class="va">deets</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        `$schema`<span class="op">=</span><span class="st">"summarized_experiment/v1.json"</span>,</span>
<span>        path<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">path</span>, <span class="va">meta.name</span><span class="op">)</span>,</span>
<span>        summarized_experiment<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            assays<span class="op">=</span><span class="va">assay.info</span>,</span>
<span>            column_data<span class="op">=</span><span class="va">cd.info</span>,</span>
<span>            row_data<span class="op">=</span><span class="va">rd.info</span>,</span>
<span>            other_data<span class="op">=</span><span class="va">meta.info</span>,</span>
<span>            dimensions<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        is_child<span class="op">=</span><span class="va">child</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>When doing so, developers should use <code><a href="../reference/altStageObject.html">.stageObject()</a></code>
instead of calling <code><a href="../reference/stageObject.html">stageObject()</a></code> (note the period). The is
a wrapper around ensures that the new staging method can respect
application-specific overrides. Similarly, some loading methods should
use <code><a href="../reference/altLoadObject.html">.loadObject()</a></code> when loading child objects:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Abbreviated example from artificer.se:</span></span>
<span><span class="va">loadSummarizedExperiment</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">exp.info</span>, <span class="va">project</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">all.assays</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">y</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">exp.info</span><span class="op">$</span><span class="va">summarized_experiment</span><span class="op">$</span><span class="va">assays</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">cur.ass</span> <span class="op">&lt;-</span> <span class="va">exp.info</span><span class="op">$</span><span class="va">summarized_experiment</span><span class="op">$</span><span class="va">assays</span><span class="op">[[</span><span class="va">y</span><span class="op">]</span><span class="op">]</span></span>
<span>        <span class="va">aname</span> <span class="op">&lt;-</span> <span class="va">cur.ass</span><span class="op">$</span><span class="va">name</span></span>
<span>        <span class="va">apath</span> <span class="op">&lt;-</span> <span class="va">cur.ass</span><span class="op">$</span><span class="va">resource</span><span class="op">$</span><span class="va">path</span></span>
<span>        <span class="va">ass.info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/acquireFile.html">acquireMetadata</a></span><span class="op">(</span><span class="va">project</span>, <span class="va">apath</span><span class="op">)</span></span>
<span>        <span class="va">all.assays</span><span class="op">[[</span><span class="va">aname</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/altLoadObject.html">.loadObject</a></span><span class="op">(</span><span class="va">ass.info</span>, project<span class="op">=</span><span class="va">project</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="va">cd.info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/acquireFile.html">acquireMetadata</a></span><span class="op">(</span><span class="va">project</span>, <span class="va">exp.info</span><span class="op">$</span><span class="va">summarized_experiment</span><span class="op">$</span><span class="va">column_data</span><span class="op">$</span><span class="va">resource</span><span class="op">$</span><span class="va">path</span><span class="op">)</span></span>
<span>    <span class="va">cd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/altLoadObject.html">.loadObject</a></span><span class="op">(</span><span class="va">cd.info</span>, project<span class="op">=</span><span class="va">project</span><span class="op">)</span></span>
<span>    <span class="va">rd.info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/acquireFile.html">acquireMetadata</a></span><span class="op">(</span><span class="va">project</span>, <span class="va">exp.info</span><span class="op">$</span><span class="va">summarized_experiment</span><span class="op">$</span><span class="va">row_data</span><span class="op">$</span><span class="va">resource</span><span class="op">$</span><span class="va">path</span><span class="op">)</span></span>
<span>    <span class="va">rd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/altLoadObject.html">.loadObject</a></span><span class="op">(</span><span class="va">rd.info</span>, project<span class="op">=</span><span class="va">project</span><span class="op">)</span></span>
<span>    <span class="va">other.info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/acquireFile.html">acquireMetadata</a></span><span class="op">(</span><span class="va">project</span>, <span class="va">exp.info</span><span class="op">$</span><span class="va">summarized_experiment</span><span class="op">$</span><span class="va">other_data</span><span class="op">$</span><span class="va">resource</span><span class="op">$</span><span class="va">path</span><span class="op">)</span></span>
<span>    <span class="va">other</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/altLoadObject.html">.loadObject</a></span><span class="op">(</span><span class="va">other.info</span>, project<span class="op">=</span><span class="va">project</span><span class="op">)</span></span>
<span></span>
<span>    <span class="fu">SummarizedExperiment</span><span class="op">(</span><span class="va">all.assays</span>, colData<span class="op">=</span><span class="va">cd</span>, rowData<span class="op">=</span><span class="va">rd</span>, metadata<span class="op">=</span><span class="va">other</span>, checkDimnames<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Inside the loading functions, we always use
<code><a href="../reference/acquireFile.html">acquireMetadata()</a></code> and <code><a href="../reference/acquireFile.html">acquireFile()</a></code> to obtain
the metadata and file paths, respectively. This ensures that we respect
any application-specific overrides, especially for <code>project</code>
values that are not file paths.</p>
</div>
<div class="section level2">
<h2 id="promoting-the-schema-to-alabaster-base">Promoting the schema to <em>alabaster.base</em><a class="anchor" aria-label="anchor" href="#promoting-the-schema-to-alabaster-base"></a>
</h2>
<p>If the new schema refers to a standard Bioconductor object that is
widely re-usable, you may consider submitting a PR with the
(non-resolved) schema to <a href="https://github.com/ArtifactDB/BiocObjectSchemas" class="external-link"><code>ArtifactDB/BiocObjectSchemas</code></a>.</p>
<p>If accepted, we will include your schema into the standard set of
schemas known to <em><a href="https://github.com/alabaster.base" class="external-link">alabaster.base</a></em>. Once
this is done, <em>alabaster.foo</em> can be simplified considerably:</p>
<ul>
<li>Special <code>.onLoad()</code> functions to register
<em>alabaster.foo</em> are no longer required.</li>
<li>The <code>$schema</code> string does not need a <code>package</code>
attribute in the <code><a href="../reference/stageObject.html">stageObject()</a></code> method.</li>
<li>The resolved schema does not need to be stored in
<em>alabaster.foo</em>’s <code>inst/schemas</code>.</li>
</ul>
<p>You may also wish to create a PR to <em><a href="https://github.com/alabaster.base" class="external-link">alabaster.base</a></em> to add
your class and package to the <a href="https://github.com/ArtifactDB/alabaster.base/tree/master/R/searchMethods.R" class="external-link">staging
search path</a>. This will prompt <code><a href="../reference/stageObject.html">stageObject()</a></code> to attempt
to load your package upon encountering an instance of the class of
interest, ensuring that the correct staging method is automatically
called even if the user hasn’t loaded your package.</p>
</div>
<div class="section level2">
<h2 class="unnumbered" id="session-information">Session information<a class="anchor" aria-label="anchor" href="#session-information"></a>
</h2>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## R Under development (unstable) (2023-02-22 r83892)</span></span>
<span><span class="co">## Platform: x86_64-pc-linux-gnu (64-bit)</span></span>
<span><span class="co">## Running under: Ubuntu 22.04.1 LTS</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Matrix products: default</span></span>
<span><span class="co">## BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 </span></span>
<span><span class="co">## LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## locale:</span></span>
<span><span class="co">##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              </span></span>
<span><span class="co">##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    </span></span>
<span><span class="co">##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   </span></span>
<span><span class="co">##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 </span></span>
<span><span class="co">##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            </span></span>
<span><span class="co">## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## time zone: Etc/UTC</span></span>
<span><span class="co">## tzcode source: system (glibc)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## attached base packages:</span></span>
<span><span class="co">## [1] stats4    stats     graphics  grDevices utils     datasets  methods  </span></span>
<span><span class="co">## [8] base     </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## other attached packages:</span></span>
<span><span class="co">## [1] S4Vectors_0.37.3      BiocGenerics_0.45.0   alabaster.base_0.99.4</span></span>
<span><span class="co">## [4] Matrix_1.5-3          BiocStyle_2.27.1     </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## loaded via a namespace (and not attached):</span></span>
<span><span class="co">##  [1] sass_0.4.5               stringi_1.7.12           lattice_0.20-45         </span></span>
<span><span class="co">##  [4] jsonvalidate_1.3.2       digest_0.6.31            magrittr_2.0.3          </span></span>
<span><span class="co">##  [7] evaluate_0.20            grid_4.3.0               bookdown_0.32           </span></span>
<span><span class="co">## [10] fastmap_1.1.1            rprojroot_2.0.3          jsonlite_1.8.4          </span></span>
<span><span class="co">## [13] alabaster.schemas_0.99.1 BiocManager_1.30.20      purrr_1.0.1             </span></span>
<span><span class="co">## [16] HDF5Array_1.27.0         textshaping_0.3.6        jquerylib_0.1.4         </span></span>
<span><span class="co">## [19] cli_3.6.0                rlang_1.0.6              cachem_1.0.7            </span></span>
<span><span class="co">## [22] DelayedArray_0.25.0      yaml_2.3.7               tools_4.3.0             </span></span>
<span><span class="co">## [25] memoise_2.0.1            Rhdf5lib_1.21.0          alabaster.matrix_0.99.1 </span></span>
<span><span class="co">## [28] curl_5.0.0               vctrs_0.5.2              R6_2.5.1                </span></span>
<span><span class="co">## [31] matrixStats_0.63.0       lifecycle_1.0.3          rhdf5_2.43.1            </span></span>
<span><span class="co">## [34] stringr_1.5.0            fs_1.6.1                 V8_4.2.2                </span></span>
<span><span class="co">## [37] IRanges_2.33.0           ragg_1.2.5               desc_1.4.2              </span></span>
<span><span class="co">## [40] pkgdown_2.0.7            bslib_0.4.2              glue_1.6.2              </span></span>
<span><span class="co">## [43] Rcpp_1.0.10              systemfonts_1.0.4        xfun_0.37               </span></span>
<span><span class="co">## [46] MatrixGenerics_1.11.0    knitr_1.42               rhdf5filters_1.11.1     </span></span>
<span><span class="co">## [49] htmltools_0.5.4          rmarkdown_2.20           compiler_4.3.0</span></span></code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Aaron Lun.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
